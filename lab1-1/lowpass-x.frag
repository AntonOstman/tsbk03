#version 150

in vec2 outTexCoord;
uniform sampler2D texUnit;
out vec4 out_Color;

#define kernelsize 41
// gaussian of sigma=3
//float kernel[kernelsize] = float[] (0.00197638, 0.0042698,  0.00850603, 0.01562532, 0.02646761, 0.04134144,
//                                    0.05954462, 0.07908352, 0.09685379, 0.10937923, 0.11390451, 0.10937923,
//                                    0.09685379, 0.07908352, 0.05954462, 0.04134144, 0.02646761, 0.01562532,
//                                    0.00850603, 0.0042698,  0.00197638);
float kernel[kernelsize] = float[] (0.00081325, 0.00123386, 0.00183241, 0.00266377, 0.00379041, 0.00527948,
                                     0.00719801, 0.00960615, 0.01254879, 0.01604613, 0.0200842,  0.02460676,
                                     0.02951006, 0.03464188, 0.03980602, 0.04477255, 0.04929361, 0.05312333,
                                     0.0560397,  0.05786581, 0.05848765, 0.05786581, 0.0560397,  0.05312333,
                                     0.04929361, 0.04477255, 0.03980602, 0.03464188, 0.02951006, 0.02460676,
                                     0.0200842,  0.01604613, 0.01254879, 0.00960615, 0.00719801, 0.00527948,
                                     0.00379041, 0.00266377, 0.00183241, 0.00123386, 0.00081325);
void main(void)
{
    vec4 outcol = vec4(0.0, 0.0, 0.0, 0.0);
    vec2 pixelsize = 1/textureSize(texUnit, 0) * 100;
    for (int i = -kernelsize / 2; i < kernelsize / 2 + 1; i++){
        float weight = kernel[i + kernelsize / 2];
        outcol += weight * texture(texUnit, outTexCoord + vec2(pixelsize.x * i, 0));
    }
    out_Color = outcol;
}
